<form [formGroup]="bagForm" > <!--(ngSubmit)="onSubmit()"-->
  <div class="container-fluid" >
      <div class="row">
          <div class="col-lg-1"></div>
          <div class="col-lg-5 text-center"><button mat-raised-button color="primary" (click)="addBag()">Create Bag</button></div>
          <div class="col-lg-5 text-center"><button mat-raised-button color="primary" (click)="createData()">Update </button></div>
          <div class="col-lg-1"><a matTooltip="Close Edit Bag Popup"  [mat-dialog-close]="true"><i class="far fa-times-circle fa-2x"></i></a></div>
        </div>
        <br>
        <!-- Bags -->
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-1"></div>
            <div class="col-lg-10">
              <!-- Bags Looping-->
              <div formArrayName="bags">
                <div class="row" *ngFor="let bag of bags.controls; let i=index;" [formGroupName]="i">
                  <!--  bagForm.get('bags')['controls'] -->
                  <div class="col-lg-12">
                    <mat-card>
                      <div class="row">
                        <div class="col-lg-10 text-left">
                          <mat-form-field style="width: 100%;">
                            <mat-label>Bag Name</mat-label>
                            <input matInput formControlName="bagName" autocomplete="off">
                          </mat-form-field>
                        </div>
                        <div class="col-lg-2 text-right"><a (click)="removeBag(i)" matTooltip="Remove Bag"><i class="fas fa-minus-circle" style="color: red" id="remove"></i></a></div>
                      </div><br>
                      <!--Item List-->
                      <div formArrayName="itemList">
                        <div class="row" *ngFor="let item of bag.get('itemList')['controls']; let x=index" [formGroupName]="x">
                          <div class="col-lg-1"></div>
                          <!--Item Looping-->
                          <div class="col-lg-10" >
                            <div class="row">
                              <div class="col-lg-6">
                                <mat-form-field style="width: 100%;">
                                  <mat-label>Name</mat-label>
                                  <input matInput  formControlName="name" autocomplete="off">
                                </mat-form-field>
                              </div>
                              <div class="col-lg-5">
                                <mat-form-field style="width: 100%;">
                                  <mat-label>Cost</mat-label>
                                  <input matInput formControlName="cost" autocomplete="off">
                                </mat-form-field>
                              </div>
                              <div class="col-lg-1"><a (click)="removeItem(bag.controls.itemList, x)"><i class="fas fa-minus"></i></a></div>
                            </div>
                            <div class="row">
                              <div class="col-lg-12">
                                <mat-form-field  style="width: 450px;">
                                  <mat-label>Description</mat-label>
                                  <textarea matInput formControlName="desc" autocomplete="off"></textarea>
                                </mat-form-field>
                              </div>
                            </div>
                            <hr style="height: 1px; background: linear-gradient(to right, #2a830e, #10ec2d);">
                          </div>
                          <div class="col-lg-1"></div>
                          <br> 
                        </div>
                      </div> 


                      <div class="row">
                        <div class="col-lg-1"></div>
                        <div class="col-lg-10" >
                          <div class="row">
                            <div class="col-lg-11"></div>
                            <div class="col-lg-1"><a (click)="addItem(bag.controls.itemList)"><i class="fas fa-plus"></i></a></div>
                          </div>
                        </div>
                        <div class="col-lg-1"></div>
                        <br> 
                      </div>
                    </mat-card>
                    <br>
                  </div>
                </div>
              </div> 
            </div>
            <div class="col-lg-1"></div>
          </div>
        </div>
  </div>
</form>


<!-- 
 <div formArrayName="items">
  <div class="row" *ngFor="let item of bag.get('items').controls; let x=index" [formGroupName]="x">
    <div class="col-lg-1"></div>
  
    <div class="col-lg-10" >
      <div class="row">
        <div class="col-lg-6">
          <mat-form-field>
            <mat-label>Name</mat-label>
            <input matInput  formControlName="name" autocomplete="off">
          </mat-form-field>
        </div>
        <div class="col-lg-5">
          <mat-form-field>
            <mat-label>Cost</mat-label>
            <input matInput formControlName="cost" autocomplete="off">
          </mat-form-field>
        </div>
        <div class="col-lg-1"><a (click)="removeItem(bag, x)"><i class="fas fa-minus"></i></a></div>
      </div>
      <div class="row">
        <div class="col-lg-12">
          <mat-form-field  style="width: 450px;">
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="desc" autocomplete="off"></textarea>
          </mat-form-field>
        </div>
      </div>
      <hr style="height: 1px; background: linear-gradient(to right, #2a830e, #10ec2d);">
    </div>
    <div class="col-lg-1"></div>
    <br> 
  </div>
</div> -->